{"ast":null,"code":"import { versionedHashVersionKzg } from '../../constants/kzg.js';\nimport { InvalidAddressError } from '../../errors/address.js';\nimport { BaseError } from '../../errors/base.js';\nimport { EmptyBlobError, InvalidVersionedHashSizeError, InvalidVersionedHashVersionError } from '../../errors/blob.js';\nimport { InvalidChainIdError } from '../../errors/chain.js';\nimport { FeeCapTooHighError, TipAboveFeeCapError } from '../../errors/node.js';\nimport { isAddress } from '../address/isAddress.js';\nimport { size } from '../data/size.js';\nimport { slice } from '../data/slice.js';\nimport { hexToNumber } from '../encoding/fromHex.js';\nexport function assertTransactionEIP4844(transaction) {\n  const {\n    blobVersionedHashes\n  } = transaction;\n  if (blobVersionedHashes) {\n    if (blobVersionedHashes.length === 0) throw new EmptyBlobError();\n    for (const hash of blobVersionedHashes) {\n      const size_ = size(hash);\n      const version = hexToNumber(slice(hash, 0, 1));\n      if (size_ !== 32) throw new InvalidVersionedHashSizeError({\n        hash,\n        size: size_\n      });\n      if (version !== versionedHashVersionKzg) throw new InvalidVersionedHashVersionError({\n        hash,\n        version\n      });\n    }\n  }\n  assertTransactionEIP1559(transaction);\n}\nexport function assertTransactionEIP1559(transaction) {\n  const {\n    chainId,\n    maxPriorityFeePerGas,\n    maxFeePerGas,\n    to\n  } = transaction;\n  if (chainId <= 0) throw new InvalidChainIdError({\n    chainId\n  });\n  if (to && !isAddress(to)) throw new InvalidAddressError({\n    address: to\n  });\n  if (maxFeePerGas && maxFeePerGas > 2n ** 256n - 1n) throw new FeeCapTooHighError({\n    maxFeePerGas\n  });\n  if (maxPriorityFeePerGas && maxFeePerGas && maxPriorityFeePerGas > maxFeePerGas) throw new TipAboveFeeCapError({\n    maxFeePerGas,\n    maxPriorityFeePerGas\n  });\n}\nexport function assertTransactionEIP2930(transaction) {\n  const {\n    chainId,\n    maxPriorityFeePerGas,\n    gasPrice,\n    maxFeePerGas,\n    to\n  } = transaction;\n  if (chainId <= 0) throw new InvalidChainIdError({\n    chainId\n  });\n  if (to && !isAddress(to)) throw new InvalidAddressError({\n    address: to\n  });\n  if (maxPriorityFeePerGas || maxFeePerGas) throw new BaseError('`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.');\n  if (gasPrice && gasPrice > 2n ** 256n - 1n) throw new FeeCapTooHighError({\n    maxFeePerGas: gasPrice\n  });\n}\nexport function assertTransactionLegacy(transaction) {\n  const {\n    chainId,\n    maxPriorityFeePerGas,\n    gasPrice,\n    maxFeePerGas,\n    to,\n    accessList\n  } = transaction;\n  if (to && !isAddress(to)) throw new InvalidAddressError({\n    address: to\n  });\n  if (typeof chainId !== 'undefined' && chainId <= 0) throw new InvalidChainIdError({\n    chainId\n  });\n  if (maxPriorityFeePerGas || maxFeePerGas) throw new BaseError('`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.');\n  if (gasPrice && gasPrice > 2n ** 256n - 1n) throw new FeeCapTooHighError({\n    maxFeePerGas: gasPrice\n  });\n  if (accessList) throw new BaseError('`accessList` is not a valid Legacy Transaction attribute.');\n}","map":{"version":3,"names":["versionedHashVersionKzg","InvalidAddressError","BaseError","EmptyBlobError","InvalidVersionedHashSizeError","InvalidVersionedHashVersionError","InvalidChainIdError","FeeCapTooHighError","TipAboveFeeCapError","isAddress","size","slice","hexToNumber","assertTransactionEIP4844","transaction","blobVersionedHashes","length","hash","size_","version","assertTransactionEIP1559","chainId","maxPriorityFeePerGas","maxFeePerGas","to","address","assertTransactionEIP2930","gasPrice","assertTransactionLegacy","accessList"],"sources":["/Users/nikhilbhatia/NIkhil/ZT-Prejects/wagmi-react-app/node_modules/viem/utils/transaction/assertTransaction.ts"],"sourcesContent":["import { versionedHashVersionKzg } from '../../constants/kzg.js'\nimport {\n  InvalidAddressError,\n  type InvalidAddressErrorType,\n} from '../../errors/address.js'\nimport { BaseError, type BaseErrorType } from '../../errors/base.js'\nimport {\n  EmptyBlobError,\n  type EmptyBlobErrorType,\n  InvalidVersionedHashSizeError,\n  type InvalidVersionedHashSizeErrorType,\n  InvalidVersionedHashVersionError,\n  type InvalidVersionedHashVersionErrorType,\n} from '../../errors/blob.js'\nimport {\n  InvalidChainIdError,\n  type InvalidChainIdErrorType,\n} from '../../errors/chain.js'\nimport {\n  FeeCapTooHighError,\n  type FeeCapTooHighErrorType,\n  TipAboveFeeCapError,\n  type TipAboveFeeCapErrorType,\n} from '../../errors/node.js'\nimport type { ErrorType } from '../../errors/utils.js'\nimport type {\n  TransactionSerializableEIP1559,\n  TransactionSerializableEIP2930,\n  TransactionSerializableEIP4844,\n  TransactionSerializableLegacy,\n} from '../../types/transaction.js'\nimport { type IsAddressErrorType, isAddress } from '../address/isAddress.js'\nimport { size } from '../data/size.js'\nimport { slice } from '../data/slice.js'\nimport { hexToNumber } from '../encoding/fromHex.js'\n\nexport type AssertTransactionEIP4844ErrorType =\n  | AssertTransactionEIP1559ErrorType\n  | EmptyBlobErrorType\n  | InvalidVersionedHashSizeErrorType\n  | InvalidVersionedHashVersionErrorType\n  | ErrorType\n\nexport function assertTransactionEIP4844(\n  transaction: TransactionSerializableEIP4844,\n) {\n  const { blobVersionedHashes } = transaction\n  if (blobVersionedHashes) {\n    if (blobVersionedHashes.length === 0) throw new EmptyBlobError()\n    for (const hash of blobVersionedHashes) {\n      const size_ = size(hash)\n      const version = hexToNumber(slice(hash, 0, 1))\n      if (size_ !== 32)\n        throw new InvalidVersionedHashSizeError({ hash, size: size_ })\n      if (version !== versionedHashVersionKzg)\n        throw new InvalidVersionedHashVersionError({\n          hash,\n          version,\n        })\n    }\n  }\n  assertTransactionEIP1559(transaction as {} as TransactionSerializableEIP1559)\n}\n\nexport type AssertTransactionEIP1559ErrorType =\n  | BaseErrorType\n  | IsAddressErrorType\n  | InvalidAddressErrorType\n  | InvalidChainIdErrorType\n  | FeeCapTooHighErrorType\n  | TipAboveFeeCapErrorType\n  | ErrorType\n\nexport function assertTransactionEIP1559(\n  transaction: TransactionSerializableEIP1559,\n) {\n  const { chainId, maxPriorityFeePerGas, maxFeePerGas, to } = transaction\n  if (chainId <= 0) throw new InvalidChainIdError({ chainId })\n  if (to && !isAddress(to)) throw new InvalidAddressError({ address: to })\n  if (maxFeePerGas && maxFeePerGas > 2n ** 256n - 1n)\n    throw new FeeCapTooHighError({ maxFeePerGas })\n  if (\n    maxPriorityFeePerGas &&\n    maxFeePerGas &&\n    maxPriorityFeePerGas > maxFeePerGas\n  )\n    throw new TipAboveFeeCapError({ maxFeePerGas, maxPriorityFeePerGas })\n}\n\nexport type AssertTransactionEIP2930ErrorType =\n  | BaseErrorType\n  | IsAddressErrorType\n  | InvalidAddressErrorType\n  | InvalidChainIdErrorType\n  | FeeCapTooHighErrorType\n  | ErrorType\n\nexport function assertTransactionEIP2930(\n  transaction: TransactionSerializableEIP2930,\n) {\n  const { chainId, maxPriorityFeePerGas, gasPrice, maxFeePerGas, to } =\n    transaction\n  if (chainId <= 0) throw new InvalidChainIdError({ chainId })\n  if (to && !isAddress(to)) throw new InvalidAddressError({ address: to })\n  if (maxPriorityFeePerGas || maxFeePerGas)\n    throw new BaseError(\n      '`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.',\n    )\n  if (gasPrice && gasPrice > 2n ** 256n - 1n)\n    throw new FeeCapTooHighError({ maxFeePerGas: gasPrice })\n}\n\nexport type AssertTransactionLegacyErrorType =\n  | BaseErrorType\n  | IsAddressErrorType\n  | InvalidAddressErrorType\n  | InvalidChainIdErrorType\n  | FeeCapTooHighErrorType\n  | ErrorType\n\nexport function assertTransactionLegacy(\n  transaction: TransactionSerializableLegacy,\n) {\n  const {\n    chainId,\n    maxPriorityFeePerGas,\n    gasPrice,\n    maxFeePerGas,\n    to,\n    accessList,\n  } = transaction\n  if (to && !isAddress(to)) throw new InvalidAddressError({ address: to })\n  if (typeof chainId !== 'undefined' && chainId <= 0)\n    throw new InvalidChainIdError({ chainId })\n  if (maxPriorityFeePerGas || maxFeePerGas)\n    throw new BaseError(\n      '`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.',\n    )\n  if (gasPrice && gasPrice > 2n ** 256n - 1n)\n    throw new FeeCapTooHighError({ maxFeePerGas: gasPrice })\n  if (accessList)\n    throw new BaseError(\n      '`accessList` is not a valid Legacy Transaction attribute.',\n    )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}