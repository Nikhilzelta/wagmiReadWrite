{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCreate2Address = exports.getCreateAddress = exports.getContractAddress = void 0;\nconst concat_js_1 = require(\"../data/concat.js\");\nconst isBytes_js_1 = require(\"../data/isBytes.js\");\nconst pad_js_1 = require(\"../data/pad.js\");\nconst slice_js_1 = require(\"../data/slice.js\");\nconst toBytes_js_1 = require(\"../encoding/toBytes.js\");\nconst toRlp_js_1 = require(\"../encoding/toRlp.js\");\nconst keccak256_js_1 = require(\"../hash/keccak256.js\");\nconst getAddress_js_1 = require(\"./getAddress.js\");\nfunction getContractAddress(opts) {\n  if (opts.opcode === 'CREATE2') return getCreate2Address(opts);\n  return getCreateAddress(opts);\n}\nexports.getContractAddress = getContractAddress;\nfunction getCreateAddress(opts) {\n  const from = (0, toBytes_js_1.toBytes)((0, getAddress_js_1.getAddress)(opts.from));\n  let nonce = (0, toBytes_js_1.toBytes)(opts.nonce);\n  if (nonce[0] === 0) nonce = new Uint8Array([]);\n  return (0, getAddress_js_1.getAddress)(`0x${(0, keccak256_js_1.keccak256)((0, toRlp_js_1.toRlp)([from, nonce], 'bytes')).slice(26)}`);\n}\nexports.getCreateAddress = getCreateAddress;\nfunction getCreate2Address(opts) {\n  const from = (0, toBytes_js_1.toBytes)((0, getAddress_js_1.getAddress)(opts.from));\n  const salt = (0, pad_js_1.pad)((0, isBytes_js_1.isBytes)(opts.salt) ? opts.salt : (0, toBytes_js_1.toBytes)(opts.salt), {\n    size: 32\n  });\n  const bytecodeHash = (() => {\n    if ('bytecodeHash' in opts) {\n      if ((0, isBytes_js_1.isBytes)(opts.bytecodeHash)) return opts.bytecodeHash;\n      return (0, toBytes_js_1.toBytes)(opts.bytecodeHash);\n    }\n    return (0, keccak256_js_1.keccak256)(opts.bytecode, 'bytes');\n  })();\n  return (0, getAddress_js_1.getAddress)((0, slice_js_1.slice)((0, keccak256_js_1.keccak256)((0, concat_js_1.concat)([(0, toBytes_js_1.toBytes)('0xff'), from, salt, bytecodeHash])), 12));\n}\nexports.getCreate2Address = getCreate2Address;","map":{"version":3,"names":["concat_js_1","require","isBytes_js_1","pad_js_1","slice_js_1","toBytes_js_1","toRlp_js_1","keccak256_js_1","getAddress_js_1","getContractAddress","opts","opcode","getCreate2Address","getCreateAddress","exports","from","toBytes","getAddress","nonce","Uint8Array","keccak256","toRlp","slice","salt","pad","isBytes","size","bytecodeHash","bytecode","concat"],"sources":["/Users/nikhilbhatia/NIkhil/ZT-Prejects/wagmi-react-app/node_modules/@safe-global/safe-apps-sdk/node_modules/viem/utils/address/getContractAddress.ts"],"sourcesContent":["import type { Address } from 'abitype'\n\nimport type { ByteArray, Hex } from '../../types/misc.js'\nimport { type ConcatErrorType, concat } from '../data/concat.js'\nimport { type IsBytesErrorType, isBytes } from '../data/isBytes.js'\nimport { type PadErrorType, pad } from '../data/pad.js'\nimport { type SliceErrorType, slice } from '../data/slice.js'\nimport { type ToBytesErrorType, toBytes } from '../encoding/toBytes.js'\nimport { type ToRlpErrorType, toRlp } from '../encoding/toRlp.js'\nimport { type Keccak256ErrorType, keccak256 } from '../hash/keccak256.js'\n\nimport type { ErrorType } from '../../errors/utils.js'\nimport { type GetAddressErrorType, getAddress } from './getAddress.js'\n\nexport type GetCreateAddressOptions = {\n  from: Address\n  nonce: bigint\n}\n\nexport type GetCreate2AddressOptions =\n  | {\n      bytecode: ByteArray | Hex\n      from: Address\n      salt: ByteArray | Hex\n    }\n  | {\n      bytecodeHash: ByteArray | Hex\n      from: Address\n      salt: ByteArray | Hex\n    }\n\nexport type GetContractAddressOptions =\n  | ({\n      opcode?: 'CREATE'\n    } & GetCreateAddressOptions)\n  | ({ opcode: 'CREATE2' } & GetCreate2AddressOptions)\n\nexport function getContractAddress(opts: GetContractAddressOptions) {\n  if (opts.opcode === 'CREATE2') return getCreate2Address(opts)\n  return getCreateAddress(opts)\n}\n\nexport type GetCreateAddressErrorType =\n  | Keccak256ErrorType\n  | GetAddressErrorType\n  | ToBytesErrorType\n  | ToRlpErrorType\n  | ErrorType\n\nexport function getCreateAddress(opts: GetCreateAddressOptions) {\n  const from = toBytes(getAddress(opts.from))\n\n  let nonce = toBytes(opts.nonce)\n  if (nonce[0] === 0) nonce = new Uint8Array([])\n\n  return getAddress(\n    `0x${keccak256(toRlp([from, nonce], 'bytes')).slice(26)}` as Address,\n  )\n}\n\nexport type GetCreate2AddressErrorType =\n  | ConcatErrorType\n  | Keccak256ErrorType\n  | GetAddressErrorType\n  | IsBytesErrorType\n  | PadErrorType\n  | SliceErrorType\n  | ToBytesErrorType\n  | ToRlpErrorType\n  | ErrorType\n\nexport function getCreate2Address(opts: GetCreate2AddressOptions) {\n  const from = toBytes(getAddress(opts.from))\n  const salt = pad(isBytes(opts.salt) ? opts.salt : toBytes(opts.salt), {\n    size: 32,\n  })\n\n  const bytecodeHash = (() => {\n    if ('bytecodeHash' in opts) {\n      if (isBytes(opts.bytecodeHash)) return opts.bytecodeHash\n      return toBytes(opts.bytecodeHash)\n    }\n    return keccak256(opts.bytecode, 'bytes')\n  })()\n\n  return getAddress(\n    slice(keccak256(concat([toBytes('0xff'), from, salt, bytecodeHash])), 12),\n  )\n}\n"],"mappings":";;;;;;AAGA,MAAAA,WAAA,GAAAC,OAAA;AACA,MAAAC,YAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,UAAA,GAAAH,OAAA;AACA,MAAAI,YAAA,GAAAJ,OAAA;AACA,MAAAK,UAAA,GAAAL,OAAA;AACA,MAAAM,cAAA,GAAAN,OAAA;AAGA,MAAAO,eAAA,GAAAP,OAAA;AAyBA,SAAgBQ,kBAAkBA,CAACC,IAA+B;EAChE,IAAIA,IAAI,CAACC,MAAM,KAAK,SAAS,EAAE,OAAOC,iBAAiB,CAACF,IAAI,CAAC;EAC7D,OAAOG,gBAAgB,CAACH,IAAI,CAAC;AAC/B;AAHAI,OAAA,CAAAL,kBAAA,GAAAA,kBAAA;AAYA,SAAgBI,gBAAgBA,CAACH,IAA6B;EAC5D,MAAMK,IAAI,GAAG,IAAAV,YAAA,CAAAW,OAAO,EAAC,IAAAR,eAAA,CAAAS,UAAU,EAACP,IAAI,CAACK,IAAI,CAAC,CAAC;EAE3C,IAAIG,KAAK,GAAG,IAAAb,YAAA,CAAAW,OAAO,EAACN,IAAI,CAACQ,KAAK,CAAC;EAC/B,IAAIA,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,EAAEA,KAAK,GAAG,IAAIC,UAAU,CAAC,EAAE,CAAC;EAE9C,OAAO,IAAAX,eAAA,CAAAS,UAAU,EACf,KAAK,IAAAV,cAAA,CAAAa,SAAS,EAAC,IAAAd,UAAA,CAAAe,KAAK,EAAC,CAACN,IAAI,EAAEG,KAAK,CAAC,EAAE,OAAO,CAAC,CAAC,CAACI,KAAK,CAAC,EAAE,CAAC,EAAa,CACrE;AACH;AATAR,OAAA,CAAAD,gBAAA,GAAAA,gBAAA;AAsBA,SAAgBD,iBAAiBA,CAACF,IAA8B;EAC9D,MAAMK,IAAI,GAAG,IAAAV,YAAA,CAAAW,OAAO,EAAC,IAAAR,eAAA,CAAAS,UAAU,EAACP,IAAI,CAACK,IAAI,CAAC,CAAC;EAC3C,MAAMQ,IAAI,GAAG,IAAApB,QAAA,CAAAqB,GAAG,EAAC,IAAAtB,YAAA,CAAAuB,OAAO,EAACf,IAAI,CAACa,IAAI,CAAC,GAAGb,IAAI,CAACa,IAAI,GAAG,IAAAlB,YAAA,CAAAW,OAAO,EAACN,IAAI,CAACa,IAAI,CAAC,EAAE;IACpEG,IAAI,EAAE;GACP,CAAC;EAEF,MAAMC,YAAY,GAAG,CAAC,MAAK;IACzB,IAAI,cAAc,IAAIjB,IAAI,EAAE;MAC1B,IAAI,IAAAR,YAAA,CAAAuB,OAAO,EAACf,IAAI,CAACiB,YAAY,CAAC,EAAE,OAAOjB,IAAI,CAACiB,YAAY;MACxD,OAAO,IAAAtB,YAAA,CAAAW,OAAO,EAACN,IAAI,CAACiB,YAAY,CAAC;;IAEnC,OAAO,IAAApB,cAAA,CAAAa,SAAS,EAACV,IAAI,CAACkB,QAAQ,EAAE,OAAO,CAAC;EAC1C,CAAC,EAAC,CAAE;EAEJ,OAAO,IAAApB,eAAA,CAAAS,UAAU,EACf,IAAAb,UAAA,CAAAkB,KAAK,EAAC,IAAAf,cAAA,CAAAa,SAAS,EAAC,IAAApB,WAAA,CAAA6B,MAAM,EAAC,CAAC,IAAAxB,YAAA,CAAAW,OAAO,EAAC,MAAM,CAAC,EAAED,IAAI,EAAEQ,IAAI,EAAEI,YAAY,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAC1E;AACH;AAjBAb,OAAA,CAAAF,iBAAA,GAAAA,iBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}