{"ast":null,"code":"import { ContractFunctionExecutionError } from 'viem';\nimport '../createConfig.js';\nimport '../types/properties.js';\nimport { multicall } from './multicall.js';\nimport { readContract } from './readContract.js';\nexport async function readContracts(config, parameters) {\n  const {\n    allowFailure = true,\n    blockNumber,\n    blockTag,\n    ...rest\n  } = parameters;\n  const contracts = parameters.contracts;\n  try {\n    const contractsByChainId = contracts.reduce((contracts, contract, index) => {\n      const chainId = contract.chainId ?? config.state.chainId;\n      return {\n        ...contracts,\n        [chainId]: [...(contracts[chainId] || []), {\n          contract,\n          index\n        }]\n      };\n    }, {});\n    const promises = () => Object.entries(contractsByChainId).map(([chainId, contracts]) => multicall(config, {\n      ...rest,\n      allowFailure,\n      blockNumber,\n      blockTag,\n      chainId: parseInt(chainId),\n      contracts: contracts.map(({\n        contract\n      }) => contract)\n    }));\n    const multicallResults = (await Promise.all(promises())).flat();\n    // Reorder the contract results back to the order they were\n    // provided in.\n    const resultIndexes = Object.values(contractsByChainId).flatMap(contracts => contracts.map(({\n      index\n    }) => index));\n    return multicallResults.reduce((results, result, index) => {\n      if (results) results[resultIndexes[index]] = result;\n      return results;\n    }, []);\n  } catch (error) {\n    if (error instanceof ContractFunctionExecutionError) throw error;\n    const promises = () => contracts.map(contract => readContract(config, {\n      ...contract,\n      blockNumber,\n      blockTag\n    }));\n    if (allowFailure) return (await Promise.allSettled(promises())).map(result => {\n      if (result.status === 'fulfilled') return {\n        result: result.value,\n        status: 'success'\n      };\n      return {\n        error: result.reason,\n        result: undefined,\n        status: 'failure'\n      };\n    });\n    return await Promise.all(promises());\n  }\n}","map":{"version":3,"names":["ContractFunctionExecutionError","multicall","readContract","readContracts","config","parameters","allowFailure","blockNumber","blockTag","rest","contracts","contractsByChainId","reduce","contract","index","chainId","state","promises","Object","entries","map","parseInt","multicallResults","Promise","all","flat","resultIndexes","values","flatMap","results","result","error","allSettled","status","value","reason","undefined"],"sources":["/Users/nikhilbhatia/NIkhil/ZT-Prejects/wagmi-react-app/node_modules/wagmi/node_modules/@wagmi/core/src/actions/readContracts.ts"],"sourcesContent":["import type {\n  ContractFunctionParameters,\n  MulticallParameters as viem_MulticallParameters,\n  MulticallReturnType as viem_MulticallReturnType,\n} from 'viem'\nimport { ContractFunctionExecutionError } from 'viem'\n\nimport { type Config } from '../createConfig.js'\nimport { type ChainIdParameter } from '../types/properties.js'\nimport { type MulticallErrorType, multicall } from './multicall.js'\nimport { type ReadContractErrorType, readContract } from './readContract.js'\n\nexport type ReadContractsParameters<\n  contracts extends readonly unknown[] = readonly ContractFunctionParameters[],\n  allowFailure extends boolean = true,\n  config extends Config = Config,\n> = viem_MulticallParameters<\n  contracts,\n  allowFailure,\n  { properties: ChainIdParameter<config> }\n>\n\nexport type ReadContractsReturnType<\n  contracts extends readonly unknown[] = readonly ContractFunctionParameters[],\n  allowFailure extends boolean = true,\n> = viem_MulticallReturnType<contracts, allowFailure>\n\nexport type ReadContractsErrorType = MulticallErrorType | ReadContractErrorType\n\nexport async function readContracts<\n  config extends Config,\n  const contracts extends readonly ContractFunctionParameters[],\n  allowFailure extends boolean = true,\n>(\n  config: config,\n  parameters: ReadContractsParameters<contracts, allowFailure, config>,\n): Promise<ReadContractsReturnType<contracts, allowFailure>> {\n  const { allowFailure = true, blockNumber, blockTag, ...rest } = parameters\n  const contracts = parameters.contracts as (ContractFunctionParameters & {\n    chainId?: number | undefined\n  })[]\n\n  try {\n    const contractsByChainId = contracts.reduce(\n      (contracts, contract, index) => {\n        const chainId = contract.chainId ?? config.state.chainId\n        return {\n          ...contracts,\n          [chainId]: [...(contracts[chainId] || []), { contract, index }],\n        }\n      },\n      {} as {\n        [chainId: number]: {\n          contract: ContractFunctionParameters\n          index: number\n        }[]\n      },\n    )\n    const promises = () =>\n      Object.entries(contractsByChainId).map(([chainId, contracts]) =>\n        multicall(config, {\n          ...rest,\n          allowFailure,\n          blockNumber,\n          blockTag,\n          chainId: parseInt(chainId),\n          contracts: contracts.map(({ contract }) => contract),\n        }),\n      )\n\n    const multicallResults = (await Promise.all(promises())).flat()\n    // Reorder the contract results back to the order they were\n    // provided in.\n    const resultIndexes = Object.values(contractsByChainId).flatMap(\n      (contracts) => contracts.map(({ index }) => index),\n    )\n    return multicallResults.reduce((results, result, index) => {\n      if (results) (results as unknown[])[resultIndexes[index]!] = result\n      return results\n    }, [] as unknown[]) as ReadContractsReturnType<contracts, allowFailure>\n  } catch (error) {\n    if (error instanceof ContractFunctionExecutionError) throw error\n\n    const promises = () =>\n      contracts.map((contract) =>\n        readContract(config, { ...contract, blockNumber, blockTag }),\n      )\n    if (allowFailure)\n      return (await Promise.allSettled(promises())).map((result) => {\n        if (result.status === 'fulfilled')\n          return { result: result.value, status: 'success' }\n        return { error: result.reason, result: undefined, status: 'failure' }\n      }) as ReadContractsReturnType<contracts, allowFailure>\n\n    return (await Promise.all(promises())) as ReadContractsReturnType<\n      contracts,\n      allowFailure\n    >\n  }\n}\n"],"mappings":"AAKA,SAASA,8BAA8B,QAAQ,MAAM;AAErD,OAA4B,oBAAoB;AAChD,OAAsC,wBAAwB;AAC9D,SAAkCC,SAAS,QAAQ,gBAAgB;AACnE,SAAqCC,YAAY,QAAQ,mBAAmB;AAmB5E,OAAO,eAAeC,aAAaA,CAKjCC,MAAc,EACdC,UAAoE;EAEpE,MAAM;IAAEC,YAAY,GAAG,IAAI;IAAEC,WAAW;IAAEC,QAAQ;IAAE,GAAGC;EAAI,CAAE,GAAGJ,UAAU;EAC1E,MAAMK,SAAS,GAAGL,UAAU,CAACK,SAEzB;EAEJ,IAAI;IACF,MAAMC,kBAAkB,GAAGD,SAAS,CAACE,MAAM,CACzC,CAACF,SAAS,EAAEG,QAAQ,EAAEC,KAAK,KAAI;MAC7B,MAAMC,OAAO,GAAGF,QAAQ,CAACE,OAAO,IAAIX,MAAM,CAACY,KAAK,CAACD,OAAO;MACxD,OAAO;QACL,GAAGL,SAAS;QACZ,CAACK,OAAO,GAAG,CAAC,IAAIL,SAAS,CAACK,OAAO,CAAC,IAAI,EAAE,CAAC,EAAE;UAAEF,QAAQ;UAAEC;QAAK,CAAE;OAC/D;IACH,CAAC,EACD,EAKC,CACF;IACD,MAAMG,QAAQ,GAAGA,CAAA,KACfC,MAAM,CAACC,OAAO,CAACR,kBAAkB,CAAC,CAACS,GAAG,CAAC,CAAC,CAACL,OAAO,EAAEL,SAAS,CAAC,KAC1DT,SAAS,CAACG,MAAM,EAAE;MAChB,GAAGK,IAAI;MACPH,YAAY;MACZC,WAAW;MACXC,QAAQ;MACRO,OAAO,EAAEM,QAAQ,CAACN,OAAO,CAAC;MAC1BL,SAAS,EAAEA,SAAS,CAACU,GAAG,CAAC,CAAC;QAAEP;MAAQ,CAAE,KAAKA,QAAQ;KACpD,CAAC,CACH;IAEH,MAAMS,gBAAgB,GAAG,CAAC,MAAMC,OAAO,CAACC,GAAG,CAACP,QAAQ,EAAE,CAAC,EAAEQ,IAAI,EAAE;IAC/D;IACA;IACA,MAAMC,aAAa,GAAGR,MAAM,CAACS,MAAM,CAAChB,kBAAkB,CAAC,CAACiB,OAAO,CAC5DlB,SAAS,IAAKA,SAAS,CAACU,GAAG,CAAC,CAAC;MAAEN;IAAK,CAAE,KAAKA,KAAK,CAAC,CACnD;IACD,OAAOQ,gBAAgB,CAACV,MAAM,CAAC,CAACiB,OAAO,EAAEC,MAAM,EAAEhB,KAAK,KAAI;MACxD,IAAIe,OAAO,EAAGA,OAAqB,CAACH,aAAa,CAACZ,KAAK,CAAE,CAAC,GAAGgB,MAAM;MACnE,OAAOD,OAAO;IAChB,CAAC,EAAE,EAAe,CAAqD;EACzE,CAAC,CAAC,OAAOE,KAAK,EAAE;IACd,IAAIA,KAAK,YAAY/B,8BAA8B,EAAE,MAAM+B,KAAK;IAEhE,MAAMd,QAAQ,GAAGA,CAAA,KACfP,SAAS,CAACU,GAAG,CAAEP,QAAQ,IACrBX,YAAY,CAACE,MAAM,EAAE;MAAE,GAAGS,QAAQ;MAAEN,WAAW;MAAEC;IAAQ,CAAE,CAAC,CAC7D;IACH,IAAIF,YAAY,EACd,OAAO,CAAC,MAAMiB,OAAO,CAACS,UAAU,CAACf,QAAQ,EAAE,CAAC,EAAEG,GAAG,CAAEU,MAAM,IAAI;MAC3D,IAAIA,MAAM,CAACG,MAAM,KAAK,WAAW,EAC/B,OAAO;QAAEH,MAAM,EAAEA,MAAM,CAACI,KAAK;QAAED,MAAM,EAAE;MAAS,CAAE;MACpD,OAAO;QAAEF,KAAK,EAAED,MAAM,CAACK,MAAM;QAAEL,MAAM,EAAEM,SAAS;QAAEH,MAAM,EAAE;MAAS,CAAE;IACvE,CAAC,CAAqD;IAExD,OAAQ,MAAMV,OAAO,CAACC,GAAG,CAACP,QAAQ,EAAE,CAAC;EAIvC;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}